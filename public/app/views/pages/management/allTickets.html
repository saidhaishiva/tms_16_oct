<div class="page-header">
        <h1 style="width: 14.5%;">All Tickets</h1> 
    </div>
    
    </br>
    <div class="jumbotron text-center" ng-show="issue.loading">
    <span class="glyphicon glyphicon-repeat spinner"></span>
    <p>Loading...</p>
    </div>
    
    
    <!--<div class="col-sm-4 pull-right">
            <div class="form-group">
                    <input type="text" ng-model="search" class="form-control" placeholder="Search">
            </div>
    </div>-->
        
        <div class="row">
            <!--<div class="col-sm-2 pull-left">
                <label>PageSize:</label>
                <select ng-model="data_limit" class="form-control">
                    <option>10</option>
                    <option>20</option>
                    <option>50</option>
                    <option>100</option>
                </select>
            </div>-->
            <!--<div class="col-sm-6 pull-left">
                <label>Search:</label>
                <input type="text" ng-model="search" ng-change="filter()" class="form-control"/>
            </div>-->
        </div>
        <div class="row">
            <div class="col-sm-12">
        <table class="table table-striped table-bordered" datatable="ng" dt-options="vm.dtOptions"  id="allTicketsTable" dt-instance="vm.dtInstance"  width="100%" dt-column-defs="vm.dtColumnDefs">

                <thead>
                <tr>
                    <th colspan="1">Mantis IssueID</th>
                    <th class="text-center" colspan="3">Mantis</th>
                    <th class="text-center" colspan="3">Internal</th>
                    <th colspan="4"></th>
                </tr>
                <tr>
                    <!--<th></th>-->
                    <th ng-click="sort('mantisIssueID')">Mantis IssueID
                            <span class="glyphicon sort-icon" ng-show="sortKey=='mantisIssueID'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('mantisStatus')">Status
                            <span class="glyphicon sort-icon" ng-show="sortKey=='mantisStatus'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('mantisCategory')">Category
                            <span class="glyphicon sort-icon" ng-show="sortKey=='mantisCategory'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('mantisPriority')">Priority
                            <span class="glyphicon sort-icon" ng-show="sortKey=='mantisPriority'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('internalStatus')">Status
                            <span class="glyphicon sort-icon" ng-show="sortKey=='internalStatus'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('internalCategory')">Category
                            <span class="glyphicon sort-icon" ng-show="sortKey=='internalCategory'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('internalPriority')">Priority
                            <span class="glyphicon sort-icon" ng-show="sortKey=='internalPriority'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('createdDate')">Created Date
                                <span class="glyphicon sort-icon" ng-show="sortKey=='createdDate'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                        </th>
                    <th ng-click="sort('module')">Module
                        <span class="glyphicon sort-icon" ng-show="sortKey=='module'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                    </th>
                    <th ng-click="sort('assingedTo')">Name / Assingned To
                                <span class="glyphicon sort-icon" ng-show="sortKey=='assingedTo'" ng-class="{'glyphicon-chevron-up':reverse,'glyphicon-chevron-down':!reverse}"></span>
                        </th>
                    <th ng-show="main.isLoggedIn && main.authorized">Action</th>
                    
                </tr>
                </thead>
                
                
                <tr ng-repeat="ticket in allTickets.tickets">
                                <!--<td><a class="green shortinfo" href="javascript:;" ng-click="childInfo(user, $event)" title="Click to view more"><i class="glyphicon glyphicon-plus-sign"/></a> </td>-->
                                <td>{{ticket.mantisIssueID}}</td>
                                <td>{{ticket.mantisStatus}}</td>
                                <td>{{ticket.mantisCategory}}</td>
                                <td>{{ticket.mantisPriority}}</td>
                                <td>{{ticket.internalStatus}}</td>
                                <td>{{ticket.internalCategory}}</td>
                                <td>{{ticket.internalPriority}}</td>
                                <td>{{ticket.createdDate}}</td>
                                <td>{{ticket.module}}</td>
                                <td>{{ticket.assingedTo}}</td>
                                <td ng-show="main.isLoggedIn && main.authorized">
                                        <div class="btn-group">
                                                <a href="/editTickets/{{ticket._id}}"><button type="button" class="btn btn-default pull-left btn" ng-click="edit($index);"><md-tooltip md-direction="top">Edit Ticket</md-tooltip><i class="glyphicon glyphicon-pencil"></i></button></a>  
                                                <button  type="button" class="btn btn-default pull-left btn" ng-click="showAdvanced(ticket.mantisIssueID)"><md-tooltip md-direction="top">Delete Ticket</md-tooltip><i class="glyphicon glyphicon-trash"></i></button>
                                                <a href="mailto:{{ticket.assingedTo}}?subject=Priority Ticket:#{{ticket.mantisIssueID}}&body=Hi,&#13;Please Look in to this issue on priority.">
                                                        <button type="button" class="btn btn-default pull-left btn">
                                                                <md-tooltip md-direction="bottom">Mail</md-tooltip>
                                                                <i class="glyphicon glyphicon-envelope"></i>
                                                        </button>
                                                </a>
                                                <button  type="button" ng-click="showCommentDisplay(ticket.mantisIssueID)" class="btn btn-default pull-left btn"><md-tooltip md-direction="bottom">Comment Histrory</md-tooltip><i class="glyphicon glyphicon-comment"></i></button>
                                        </div>
                                </td>
                </tr>
            </table>

            

        </div>
        </div>
    
    <div class="row show-hide-message" ng-show="issue.successMsg" >
    <div class="alert alert-success">{{ issue.successMsg }}</div>
    </div>
    
    <div class="row show-hide-message" ng-show="issue.errorMsg" >
        <div class="alert alert-danger">{{ issue.errorMsg }}</div>
    </div>